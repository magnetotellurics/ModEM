# Makefile suited for building the ModEM program
# Generated using: ./fmkmf.pl [OPTIONS] SourceCode/ModEM.f90 > Makefile
# with command line options
# -p SourceCode:SourceCode/1D:SourceCode/2D:SourceCode/CSEM/EM1D:SourceCode/CSEM/EM1D/src:SourceCode/CSEM/Dipole1D:SourceCode/DataIO:SourceCode/DataSpace:SourceCode/Inversion:SourceCode/SP_Topology:SourceCode/Fields:SourceCode/ForwardSolver:SourceCode/Grid:SourceCode/ModelOperator:SourceCode/PreConditioner:SourceCode/ModelParameter:SourceCode/Receivers:SourceCode/Solver:SourceCode/Source:SourceCode/Transmitters:SourceCode/Utils
# -f90 gfortran (compiler)
# -opt -g -Wno-all -fbacktrace -ffree-line-length-none (compiler optimisation)
# -lp -L/usr/lib64  -L/usr/lib/x86_64-linux-gnu (linking options: path to libraries)
# -l -llapack -lblas -lfftw3l -lfftw3f -lfftw3 (linking options)
# -o objs/MT3D_OO_MPI (output directory for object files)

#  Uncomment these lines to make program for Solaris OS (legacy)
# F90 = f90
# FFLAGS = -dalign -g -C -w  -L/usr/local/lib
# LIBS = -xlic_lib=sunperf
#  Uncomment these lines to make program with g95
# include Makefile.local
# OBJDIR = ./objs/3D_MT/G95Debug
# F90 = g95
# FFLAGS = -O2
# FFLAGS = -g -ftrace=frame -fbounds-check
# MPIFLAGS = -cpp # for serial code
# MODULE = -fmod=$(OBJDIR)
# LIBS = -lblas -llapack
#  Uncomment these lines to make program with Intel compiler
# include Makefile.local
# OBJDIR = ./objs/3D_MT/IFortDebug
# F90 = ifort
# FFLAGS = -O3 -parallel -openmp #-heap-arrays
# FFLAGS = -debug all -check bounds -traceback -heap-arrays
# MPIFLAGS = -cpp # for serial code
# MODULE = -module $(OBJDIR)
# LIBS = -lblas -llapack
#  Uncomment these lines to make program with PGI compiler
# include Makefile.local
# OBJDIR = ./objs/3D_MT/PGIDebug
# F90 = pgf95  # mpif90
# FFLAGS = -O3
# FFLAGS = -g -Mprof=lines -Mbounds
# MPIFLAGS = -Mpreprocess # for serial code
# MPIFLAGS = -Bstatic  -Mipa=fast  -Mextend  -Kieee -Mpreprocess -DMPI
# MODULE = -module $(OBJDIR)
# LIBS = -llapack -lblas
# LIBS = -L/usr/lib64 -llapack -lblas -lpgftnrtl -Mprof=lines

# ------------------Macro-Defs---------------------
include Build/Makefile.local
OBJDIR = ../../objs/MT3D_OO
F90 = gfortran
FFLAGS = -g -Wno-all -fbacktrace -ffree-line-length-none
MPIFLAGS = -x f95-cpp-input -I/usr/include/
MODULE = -J $(OBJDIR)
LIBS_PATH = -L-L/usr/lib64  -L/usr/lib/x86_64-linux-gnu
LIBS = -llapack -lblas -lfftw3l -lfftw3f -lfftw3

# -------------------End-macro-Defs---------------------------
OBJ = $(OBJDIR)/Constants.o $(OBJDIR)/FileUnits.o $(OBJDIR)/Utilities.o $(OBJDIR)/Grid1D.o $(OBJDIR)/Grid2D.o $(OBJDIR)/ModelParameter1D.o $(OBJDIR)/Esoln2DTM.o $(OBJDIR)/ModelParameter2D.o $(OBJDIR)/Grid.o $(OBJDIR)/Grid3D_SG.o $(OBJDIR)/MatUtils.o $(OBJDIR)/Field.o $(OBJDIR)/Scalar.o $(OBJDIR)/rScalar3D_SG.o $(OBJDIR)/Vector.o $(OBJDIR)/rVector3D_SG.o $(OBJDIR)/cScalar3D_SG.o $(OBJDIR)/cVector3D_SG.o $(OBJDIR)/Grid3D_MR.o $(OBJDIR)/rScalar3D_MR.o $(OBJDIR)/cScalar3D_MR.o $(OBJDIR)/rVector3D_MR.o $(OBJDIR)/cVector3D_MR.o $(OBJDIR)/iScalar3D_SG.o $(OBJDIR)/MetricElements.o $(OBJDIR)/ModelParameter.o $(OBJDIR)/String.o $(OBJDIR)/DataGroup.o $(OBJDIR)/DataGroupTx.o $(OBJDIR)/ModelOperator.o $(OBJDIR)/Source.o $(OBJDIR)/PreConditioner.o $(OBJDIR)/Solver.o $(OBJDIR)/Solver_CC.o $(OBJDIR)/ForwardSolver.o $(OBJDIR)/FilterModules.o $(OBJDIR)/Dipole1D.o $(OBJDIR)/spOpTools.o $(OBJDIR)/spOpTopology.o $(OBJDIR)/spOpTopology_SG.o $(OBJDIR)/spOpTopology_MR.o $(OBJDIR)/MetricElements_SG.o $(OBJDIR)/MetricElements_MR.o $(OBJDIR)/ModelOperator_SP.o $(OBJDIR)/ModelOperator_SP_V2.o $(OBJDIR)/SourceCSEM.o $(OBJDIR)/SourceAdjoint.o $(OBJDIR)/Transmitter.o $(OBJDIR)/cVectorSparse3D_SG.o $(OBJDIR)/Receiver.o $(OBJDIR)/ReceiverArray.o $(OBJDIR)/TransmitterMT.o $(OBJDIR)/TransmitterCSEM.o $(OBJDIR)/TransmitterArray.o $(OBJDIR)/DataGroupTxArray.o $(OBJDIR)/ForwardControlFile.o $(OBJDIR)/InversionControlFile.o $(OBJDIR)/ModelOperator_MF_SG.o $(OBJDIR)/ModelOperator_SP_V1.o $(OBJDIR)/ModelParameterCell.o $(OBJDIR)/ModelParameterCell_SG.o $(OBJDIR)/ModelParameterCell_MR.o $(OBJDIR)/ModelCovariance.o $(OBJDIR)/PreConditioner_CC_MF_SG.o $(OBJDIR)/PreConditioner_CC_SP_SG.o $(OBJDIR)/PreConditioner_CC_SP_MR.o $(OBJDIR)/Solver_QMR.o $(OBJDIR)/Solver_BICG.o $(OBJDIR)/ForwardSolver_IT.o $(OBJDIR)/PreConditioner_DC_MF_SG.o $(OBJDIR)/PreConditioner_DC_SP.o $(OBJDIR)/Solver_PCG.o $(OBJDIR)/DivergenceCorrection.o $(OBJDIR)/ForwardSolver_IT_DC.o $(OBJDIR)/Forward1D.o $(OBJDIR)/SourceMT_1D.o $(OBJDIR)/SourceMT_2D.o $(OBJDIR)/machine_dep_mod.o $(OBJDIR)/util_mod.o $(OBJDIR)/constants_mod.o $(OBJDIR)/spline_mod.o $(OBJDIR)/io_common_mod.o $(OBJDIR)/hankel_mod.o $(OBJDIR)/adaptive_int_mod.o $(OBJDIR)/counter_mod.o $(OBJDIR)/refl_mod_new.o $(OBJDIR)/EM1D.o $(OBJDIR)/SourceCSEM_EM1D.o $(OBJDIR)/SourceCSEM_Dipole1D.o $(OBJDIR)/ReceiverFullImpedance.o $(OBJDIR)/ReceiverFullVerticalMagnetic.o $(OBJDIR)/ReceiverOffDiagonalImpedance.o $(OBJDIR)/ReceiverSingleField.o $(OBJDIR)/ModelReader.o $(OBJDIR)/ModelReader_Weerachai.o $(OBJDIR)/DataEntry.o $(OBJDIR)/DataEntryArray.o $(OBJDIR)/DataEntryMT.o $(OBJDIR)/DataEntryMT_REF.o $(OBJDIR)/DataEntryCSEM.o $(OBJDIR)/ReceiverExyAmpliPhase.o $(OBJDIR)/DataFile.o $(OBJDIR)/DataFileStandard.o $(OBJDIR)/CoreComponents.o $(OBJDIR)/ForwardModeling.o $(OBJDIR)/Sensitivity.o $(OBJDIR)/Inversion.o $(OBJDIR)/InversionDCG.o $(OBJDIR)/InversionNLCG.o $(OBJDIR)/InversionJob.o $(OBJDIR)/ModEM.o 


all: ModEM 

# Here is the link step 
ModEM: $(OBJDIR) $(OBJ) 
	 $(F90) -o $(OUTDIR)/ModEM $(OBJ) $(LIBS_PATH) $(LIBS)

# Here are the compile steps 

$(OBJDIR): 
	mkdir -p $(OBJDIR)

$(OBJDIR)/Constants.o:SourceCode/Utils/Constants.f90  
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Utils/Constants.f90 -o $(OBJDIR)/Constants.o

$(OBJDIR)/FileUnits.o:SourceCode/Utils/FileUnits.f90  
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Utils/FileUnits.f90 -o $(OBJDIR)/FileUnits.o

$(OBJDIR)/Utilities.o:SourceCode/Utils/Utilities.f90 $(OBJDIR)/Constants.o $(OBJDIR)/FileUnits.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Utils/Utilities.f90 -o $(OBJDIR)/Utilities.o

$(OBJDIR)/Grid1D.o:SourceCode/1D/Grid1D.f90 $(OBJDIR)/Constants.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/1D/Grid1D.f90 -o $(OBJDIR)/Grid1D.o

$(OBJDIR)/Grid2D.o:SourceCode/2D/Grid2D.f90 $(OBJDIR)/Constants.o $(OBJDIR)/Grid1D.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/2D/Grid2D.f90 -o $(OBJDIR)/Grid2D.o

$(OBJDIR)/ModelParameter1D.o:SourceCode/1D/ModelParameter1D.f90 $(OBJDIR)/Constants.o $(OBJDIR)/Grid1D.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/1D/ModelParameter1D.f90 -o $(OBJDIR)/ModelParameter1D.o

$(OBJDIR)/Esoln2DTM.o:SourceCode/2D/Esoln2DTM.f90 $(OBJDIR)/Utilities.o $(OBJDIR)/Grid2D.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/2D/Esoln2DTM.f90 -o $(OBJDIR)/Esoln2DTM.o

$(OBJDIR)/ModelParameter2D.o:SourceCode/2D/ModelParameter2D.f90 $(OBJDIR)/Constants.o $(OBJDIR)/Grid2D.o $(OBJDIR)/Esoln2DTM.o $(OBJDIR)/Grid1D.o $(OBJDIR)/ModelParameter1D.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/2D/ModelParameter2D.f90 -o $(OBJDIR)/ModelParameter2D.o

$(OBJDIR)/Grid.o:SourceCode/Grid/Grid.f90 $(OBJDIR)/Utilities.o $(OBJDIR)/Grid1D.o $(OBJDIR)/Grid2D.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Grid/Grid.f90 -o $(OBJDIR)/Grid.o

$(OBJDIR)/Grid3D_SG.o:SourceCode/Grid/Grid3D_SG.f90 $(OBJDIR)/Grid.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Grid/Grid3D_SG.f90 -o $(OBJDIR)/Grid3D_SG.o

$(OBJDIR)/MatUtils.o:SourceCode/Utils/MatUtils.f90 $(OBJDIR)/Constants.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Utils/MatUtils.f90 -o $(OBJDIR)/MatUtils.o

$(OBJDIR)/Field.o:SourceCode/Fields/Field.f90 $(OBJDIR)/Utilities.o $(OBJDIR)/Grid.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/Field.f90 -o $(OBJDIR)/Field.o

$(OBJDIR)/Scalar.o:SourceCode/Fields/Scalar.f90 $(OBJDIR)/Field.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/Scalar.f90 -o $(OBJDIR)/Scalar.o

$(OBJDIR)/rScalar3D_SG.o:SourceCode/Fields/rScalar3D_SG.f90 $(OBJDIR)/Scalar.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/rScalar3D_SG.f90 -o $(OBJDIR)/rScalar3D_SG.o

$(OBJDIR)/Vector.o:SourceCode/Fields/Vector.f90 $(OBJDIR)/rScalar3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/Vector.f90 -o $(OBJDIR)/Vector.o

$(OBJDIR)/rVector3D_SG.o:SourceCode/Fields/rVector3D_SG.f90 $(OBJDIR)/MatUtils.o $(OBJDIR)/Vector.o $(OBJDIR)/Grid3D_SG.o $(OBJDIR)/rScalar3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/rVector3D_SG.f90 -o $(OBJDIR)/rVector3D_SG.o

$(OBJDIR)/cScalar3D_SG.o:SourceCode/Fields/cScalar3D_SG.f90 $(OBJDIR)/rScalar3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/cScalar3D_SG.f90 -o $(OBJDIR)/cScalar3D_SG.o

$(OBJDIR)/cVector3D_SG.o:SourceCode/Fields/cVector3D_SG.f90 $(OBJDIR)/Grid3D_SG.o $(OBJDIR)/rVector3D_SG.o $(OBJDIR)/cScalar3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/cVector3D_SG.f90 -o $(OBJDIR)/cVector3D_SG.o

$(OBJDIR)/Grid3D_MR.o:SourceCode/Grid/Grid3D_MR.f90 $(OBJDIR)/Utilities.o $(OBJDIR)/Grid3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Grid/Grid3D_MR.f90 -o $(OBJDIR)/Grid3D_MR.o

$(OBJDIR)/rScalar3D_MR.o:SourceCode/Fields/rScalar3D_MR.f90 $(OBJDIR)/rScalar3D_SG.o $(OBJDIR)/Grid3D_MR.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/rScalar3D_MR.f90 -o $(OBJDIR)/rScalar3D_MR.o

$(OBJDIR)/cScalar3D_MR.o:SourceCode/Fields/cScalar3D_MR.f90 $(OBJDIR)/rScalar3D_MR.o $(OBJDIR)/cScalar3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/cScalar3D_MR.f90 -o $(OBJDIR)/cScalar3D_MR.o

$(OBJDIR)/rVector3D_MR.o:SourceCode/Fields/rVector3D_MR.f90 $(OBJDIR)/MatUtils.o $(OBJDIR)/rVector3D_SG.o $(OBJDIR)/cScalar3D_MR.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/rVector3D_MR.f90 -o $(OBJDIR)/rVector3D_MR.o

$(OBJDIR)/cVector3D_MR.o:SourceCode/Fields/cVector3D_MR.f90 $(OBJDIR)/cVector3D_SG.o $(OBJDIR)/rVector3D_MR.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/cVector3D_MR.f90 -o $(OBJDIR)/cVector3D_MR.o

$(OBJDIR)/iScalar3D_SG.o:SourceCode/Fields/iScalar3D_SG.f90 $(OBJDIR)/Scalar.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/iScalar3D_SG.f90 -o $(OBJDIR)/iScalar3D_SG.o

$(OBJDIR)/MetricElements.o:SourceCode/ModelOperator/MetricElements.f90 $(OBJDIR)/cVector3D_MR.o $(OBJDIR)/iScalar3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelOperator/MetricElements.f90 -o $(OBJDIR)/MetricElements.o

$(OBJDIR)/ModelParameter.o:SourceCode/ModelParameter/ModelParameter.f90 $(OBJDIR)/Utilities.o $(OBJDIR)/Grid2D.o $(OBJDIR)/ModelParameter1D.o $(OBJDIR)/ModelParameter2D.o $(OBJDIR)/MetricElements.o $(OBJDIR)/Vector.o $(OBJDIR)/rScalar3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelParameter/ModelParameter.f90 -o $(OBJDIR)/ModelParameter.o

$(OBJDIR)/String.o:SourceCode/Utils/String.f90  
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Utils/String.f90 -o $(OBJDIR)/String.o

$(OBJDIR)/DataGroup.o:SourceCode/DataSpace/DataGroup.f90 $(OBJDIR)/String.o $(OBJDIR)/Utilities.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/DataSpace/DataGroup.f90 -o $(OBJDIR)/DataGroup.o

$(OBJDIR)/DataGroupTx.o:SourceCode/DataSpace/DataGroupTx.f90 $(OBJDIR)/DataGroup.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/DataSpace/DataGroupTx.f90 -o $(OBJDIR)/DataGroupTx.o

$(OBJDIR)/ModelOperator.o:SourceCode/ModelOperator/ModelOperator.f90 $(OBJDIR)/MetricElements.o $(OBJDIR)/ModelParameter.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelOperator/ModelOperator.f90 -o $(OBJDIR)/ModelOperator.o

$(OBJDIR)/Source.o:SourceCode/Source/Source.f90 $(OBJDIR)/Utilities.o $(OBJDIR)/ModelOperator.o $(OBJDIR)/ModelParameter.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Source/Source.f90 -o $(OBJDIR)/Source.o

$(OBJDIR)/PreConditioner.o:SourceCode/PreConditioner/PreConditioner.f90 $(OBJDIR)/ModelOperator.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/PreConditioner/PreConditioner.f90 -o $(OBJDIR)/PreConditioner.o

$(OBJDIR)/Solver.o:SourceCode/Solver/Solver.f90 $(OBJDIR)/Utilities.o $(OBJDIR)/PreConditioner.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Solver/Solver.f90 -o $(OBJDIR)/Solver.o

$(OBJDIR)/Solver_CC.o:SourceCode/Solver/Solver_CC.f90 $(OBJDIR)/Solver.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Solver/Solver_CC.f90 -o $(OBJDIR)/Solver_CC.o

$(OBJDIR)/ForwardSolver.o:SourceCode/ForwardSolver/ForwardSolver.f90 $(OBJDIR)/Constants.o $(OBJDIR)/Vector.o $(OBJDIR)/Source.o $(OBJDIR)/ModelParameter.o $(OBJDIR)/Solver_CC.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ForwardSolver/ForwardSolver.f90 -o $(OBJDIR)/ForwardSolver.o

$(OBJDIR)/FilterModules.o:SourceCode/CSEM/Dipole1D/FilterModules.f90  
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CSEM/Dipole1D/FilterModules.f90 -o $(OBJDIR)/FilterModules.o

$(OBJDIR)/Dipole1D.o:SourceCode/CSEM/Dipole1D/Dipole1D.f90 $(OBJDIR)/FilterModules.o $(OBJDIR)/FilterModules.o $(OBJDIR)/FilterModules.o $(OBJDIR)/FilterModules.o $(OBJDIR)/FilterModules.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CSEM/Dipole1D/Dipole1D.f90 -o $(OBJDIR)/Dipole1D.o

$(OBJDIR)/spOpTools.o:SourceCode/SP_Topology/spOpTools.f90 $(OBJDIR)/Utilities.o $(OBJDIR)/MetricElements.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/SP_Topology/spOpTools.f90 -o $(OBJDIR)/spOpTools.o

$(OBJDIR)/spOpTopology.o:SourceCode/SP_Topology/spOpTopology.f90 $(OBJDIR)/spOpTools.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/SP_Topology/spOpTopology.f90 -o $(OBJDIR)/spOpTopology.o

$(OBJDIR)/spOpTopology_SG.o:SourceCode/SP_Topology/spOpTopology_SG.f90 $(OBJDIR)/spOpTopology.o $(OBJDIR)/Grid3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/SP_Topology/spOpTopology_SG.f90 -o $(OBJDIR)/spOpTopology_SG.o

$(OBJDIR)/spOpTopology_MR.o:SourceCode/SP_Topology/spOpTopology_MR.f90 $(OBJDIR)/spOpTopology_SG.o $(OBJDIR)/rVector3D_MR.o $(OBJDIR)/rScalar3D_MR.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/SP_Topology/spOpTopology_MR.f90 -o $(OBJDIR)/spOpTopology_MR.o

$(OBJDIR)/MetricElements_SG.o:SourceCode/ModelOperator/MetricElements_SG.f90 $(OBJDIR)/MetricElements.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelOperator/MetricElements_SG.f90 -o $(OBJDIR)/MetricElements_SG.o

$(OBJDIR)/MetricElements_MR.o:SourceCode/ModelOperator/MetricElements_MR.f90 $(OBJDIR)/MetricElements_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelOperator/MetricElements_MR.f90 -o $(OBJDIR)/MetricElements_MR.o

$(OBJDIR)/ModelOperator_SP.o:SourceCode/ModelOperator/ModelOperator_SP.f90 $(OBJDIR)/ModelOperator.o $(OBJDIR)/spOpTopology.o $(OBJDIR)/spOpTopology_MR.o $(OBJDIR)/MetricElements_SG.o $(OBJDIR)/MetricElements_MR.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelOperator/ModelOperator_SP.f90 -o $(OBJDIR)/ModelOperator_SP.o

$(OBJDIR)/ModelOperator_SP_V2.o:SourceCode/ModelOperator/ModelOperator_SP_V2.f90 $(OBJDIR)/ModelOperator_SP.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelOperator/ModelOperator_SP_V2.f90 -o $(OBJDIR)/ModelOperator_SP_V2.o

$(OBJDIR)/SourceCSEM.o:SourceCode/Source/SourceCSEM.f90 $(OBJDIR)/Source.o $(OBJDIR)/Dipole1D.o $(OBJDIR)/ModelOperator_SP_V2.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Source/SourceCSEM.f90 -o $(OBJDIR)/SourceCSEM.o

$(OBJDIR)/SourceAdjoint.o:SourceCode/Source/SourceAdjoint.f90 $(OBJDIR)/Source.o $(OBJDIR)/ModelOperator_SP_V2.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Source/SourceAdjoint.f90 -o $(OBJDIR)/SourceAdjoint.o

$(OBJDIR)/Transmitter.o:SourceCode/Transmitters/Transmitter.f90 $(OBJDIR)/Utilities.o $(OBJDIR)/FileUnits.o $(OBJDIR)/ForwardSolver.o $(OBJDIR)/ModelParameter.o $(OBJDIR)/ModelOperator.o $(OBJDIR)/SourceCSEM.o $(OBJDIR)/SourceAdjoint.o $(OBJDIR)/rVector3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Transmitters/Transmitter.f90 -o $(OBJDIR)/Transmitter.o

$(OBJDIR)/cVectorSparse3D_SG.o:SourceCode/Fields/cVectorSparse3D_SG.f90 $(OBJDIR)/Field.o $(OBJDIR)/cVector3D_MR.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Fields/cVectorSparse3D_SG.f90 -o $(OBJDIR)/cVectorSparse3D_SG.o

$(OBJDIR)/Receiver.o:SourceCode/Receivers/Receiver.f90 $(OBJDIR)/String.o $(OBJDIR)/DataGroup.o $(OBJDIR)/Transmitter.o $(OBJDIR)/cVectorSparse3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Receivers/Receiver.f90 -o $(OBJDIR)/Receiver.o

$(OBJDIR)/ReceiverArray.o:SourceCode/Receivers/ReceiverArray.f90 $(OBJDIR)/Receiver.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Receivers/ReceiverArray.f90 -o $(OBJDIR)/ReceiverArray.o

$(OBJDIR)/TransmitterMT.o:SourceCode/Transmitters/TransmitterMT.f90 $(OBJDIR)/Transmitter.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Transmitters/TransmitterMT.f90 -o $(OBJDIR)/TransmitterMT.o

$(OBJDIR)/TransmitterCSEM.o:SourceCode/Transmitters/TransmitterCSEM.f90 $(OBJDIR)/Transmitter.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Transmitters/TransmitterCSEM.f90 -o $(OBJDIR)/TransmitterCSEM.o

$(OBJDIR)/TransmitterArray.o:SourceCode/Transmitters/TransmitterArray.f90 $(OBJDIR)/Transmitter.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Transmitters/TransmitterArray.f90 -o $(OBJDIR)/TransmitterArray.o

$(OBJDIR)/DataGroupTxArray.o:SourceCode/DataSpace/DataGroupTxArray.f90 $(OBJDIR)/DataGroupTx.o $(OBJDIR)/FileUnits.o $(OBJDIR)/ReceiverArray.o $(OBJDIR)/TransmitterMT.o $(OBJDIR)/TransmitterCSEM.o $(OBJDIR)/TransmitterArray.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/DataSpace/DataGroupTxArray.f90 -o $(OBJDIR)/DataGroupTxArray.o

$(OBJDIR)/ForwardControlFile.o:SourceCode/ForwardControlFile.f90 $(OBJDIR)/Utilities.o $(OBJDIR)/String.o $(OBJDIR)/Grid3D_MR.o $(OBJDIR)/ForwardSolver.o $(OBJDIR)/Solver.o $(OBJDIR)/SourceCSEM.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ForwardControlFile.f90 -o $(OBJDIR)/ForwardControlFile.o

$(OBJDIR)/InversionControlFile.o:SourceCode/Inversion/InversionControlFile.f90 $(OBJDIR)/Constants.o $(OBJDIR)/String.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Inversion/InversionControlFile.f90 -o $(OBJDIR)/InversionControlFile.o

$(OBJDIR)/ModelOperator_MF_SG.o:SourceCode/ModelOperator/ModelOperator_MF_SG.f90 $(OBJDIR)/ModelOperator.o $(OBJDIR)/MetricElements_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelOperator/ModelOperator_MF_SG.f90 -o $(OBJDIR)/ModelOperator_MF_SG.o

$(OBJDIR)/ModelOperator_SP_V1.o:SourceCode/ModelOperator/ModelOperator_SP_V1.f90 $(OBJDIR)/ModelOperator_SP.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelOperator/ModelOperator_SP_V1.f90 -o $(OBJDIR)/ModelOperator_SP_V1.o

$(OBJDIR)/ModelParameterCell.o:SourceCode/ModelParameter/ModelParameterCell.f90 $(OBJDIR)/ModelParameter.o $(OBJDIR)/rScalar3D_SG.o $(OBJDIR)/FileUnits.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelParameter/ModelParameterCell.f90 -o $(OBJDIR)/ModelParameterCell.o

$(OBJDIR)/ModelParameterCell_SG.o:SourceCode/ModelParameter/ModelParameterCell_SG.f90 $(OBJDIR)/ModelParameterCell.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelParameter/ModelParameterCell_SG.f90 -o $(OBJDIR)/ModelParameterCell_SG.o

$(OBJDIR)/ModelParameterCell_MR.o:SourceCode/ModelParameter/ModelParameterCell_MR.f90 $(OBJDIR)/MetricElements_SG.o $(OBJDIR)/ModelParameterCell_SG.o $(OBJDIR)/Grid3D_MR.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelParameter/ModelParameterCell_MR.f90 -o $(OBJDIR)/ModelParameterCell_MR.o

$(OBJDIR)/ModelCovariance.o:SourceCode/ModelParameter/ModelCovariance.f90 $(OBJDIR)/Constants.o $(OBJDIR)/ModelParameterCell_SG.o $(OBJDIR)/cVectorSparse3D_SG.o $(OBJDIR)/rScalar3D_SG.o $(OBJDIR)/iScalar3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelParameter/ModelCovariance.f90 -o $(OBJDIR)/ModelCovariance.o

$(OBJDIR)/PreConditioner_CC_MF_SG.o:SourceCode/PreConditioner/PreConditioner_CC_MF_SG.f90 $(OBJDIR)/PreConditioner.o $(OBJDIR)/ModelOperator_MF_SG.o $(OBJDIR)/cVector3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/PreConditioner/PreConditioner_CC_MF_SG.f90 -o $(OBJDIR)/PreConditioner_CC_MF_SG.o

$(OBJDIR)/PreConditioner_CC_SP_SG.o:SourceCode/PreConditioner/PreConditioner_CC_SP_SG.f90 $(OBJDIR)/PreConditioner.o $(OBJDIR)/ModelOperator_SP_V1.o $(OBJDIR)/ModelOperator_SP_V2.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/PreConditioner/PreConditioner_CC_SP_SG.f90 -o $(OBJDIR)/PreConditioner_CC_SP_SG.o

$(OBJDIR)/PreConditioner_CC_SP_MR.o:SourceCode/PreConditioner/PreConditioner_CC_SP_MR.f90 $(OBJDIR)/PreConditioner.o $(OBJDIR)/ModelOperator_SP_V1.o $(OBJDIR)/ModelOperator_SP_V2.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/PreConditioner/PreConditioner_CC_SP_MR.f90 -o $(OBJDIR)/PreConditioner_CC_SP_MR.o

$(OBJDIR)/Solver_QMR.o:SourceCode/Solver/Solver_QMR.f90 $(OBJDIR)/Solver_CC.o $(OBJDIR)/ModelOperator_MF_SG.o $(OBJDIR)/ModelOperator_SP_V1.o $(OBJDIR)/ModelOperator_SP_V2.o $(OBJDIR)/PreConditioner_CC_MF_SG.o $(OBJDIR)/PreConditioner_CC_SP_SG.o $(OBJDIR)/PreConditioner_CC_SP_MR.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Solver/Solver_QMR.f90 -o $(OBJDIR)/Solver_QMR.o

$(OBJDIR)/Solver_BICG.o:SourceCode/Solver/Solver_BICG.f90 $(OBJDIR)/Solver_CC.o $(OBJDIR)/ModelOperator_MF_SG.o $(OBJDIR)/ModelOperator_SP_V1.o $(OBJDIR)/ModelOperator_SP_V2.o $(OBJDIR)/PreConditioner_CC_MF_SG.o $(OBJDIR)/PreConditioner_CC_SP_SG.o $(OBJDIR)/PreConditioner_CC_SP_MR.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Solver/Solver_BICG.f90 -o $(OBJDIR)/Solver_BICG.o

$(OBJDIR)/ForwardSolver_IT.o:SourceCode/ForwardSolver/ForwardSolver_IT.f90 $(OBJDIR)/ForwardSolver.o $(OBJDIR)/Solver_QMR.o $(OBJDIR)/Solver_BICG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ForwardSolver/ForwardSolver_IT.f90 -o $(OBJDIR)/ForwardSolver_IT.o

$(OBJDIR)/PreConditioner_DC_MF_SG.o:SourceCode/PreConditioner/PreConditioner_DC_MF_SG.f90 $(OBJDIR)/PreConditioner.o $(OBJDIR)/ModelOperator_MF_SG.o $(OBJDIR)/cScalar3D_SG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/PreConditioner/PreConditioner_DC_MF_SG.f90 -o $(OBJDIR)/PreConditioner_DC_MF_SG.o

$(OBJDIR)/PreConditioner_DC_SP.o:SourceCode/PreConditioner/PreConditioner_DC_SP.f90 $(OBJDIR)/PreConditioner.o $(OBJDIR)/ModelOperator_SP.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/PreConditioner/PreConditioner_DC_SP.f90 -o $(OBJDIR)/PreConditioner_DC_SP.o

$(OBJDIR)/Solver_PCG.o:SourceCode/Solver/Solver_PCG.f90 $(OBJDIR)/Solver.o $(OBJDIR)/ModelOperator_MF_SG.o $(OBJDIR)/ModelOperator_SP_V1.o $(OBJDIR)/ModelOperator_SP_V2.o $(OBJDIR)/PreConditioner_DC_MF_SG.o $(OBJDIR)/PreConditioner_DC_SP.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Solver/Solver_PCG.f90 -o $(OBJDIR)/Solver_PCG.o

$(OBJDIR)/DivergenceCorrection.o:SourceCode/ForwardSolver/DivergenceCorrection.f90 $(OBJDIR)/Solver_PCG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ForwardSolver/DivergenceCorrection.f90 -o $(OBJDIR)/DivergenceCorrection.o

$(OBJDIR)/ForwardSolver_IT_DC.o:SourceCode/ForwardSolver/ForwardSolver_IT_DC.f90 $(OBJDIR)/ForwardSolver_IT.o $(OBJDIR)/DivergenceCorrection.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ForwardSolver/ForwardSolver_IT_DC.f90 -o $(OBJDIR)/ForwardSolver_IT_DC.o

$(OBJDIR)/Forward1D.o:SourceCode/1D/Forward1D.f90 $(OBJDIR)/Constants.o $(OBJDIR)/Grid1D.o $(OBJDIR)/ModelParameter1D.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/1D/Forward1D.f90 -o $(OBJDIR)/Forward1D.o

$(OBJDIR)/SourceMT_1D.o:SourceCode/Source/SourceMT_1D.f90 $(OBJDIR)/Source.o $(OBJDIR)/ModelParameter1D.o $(OBJDIR)/Forward1D.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Source/SourceMT_1D.f90 -o $(OBJDIR)/SourceMT_1D.o

$(OBJDIR)/SourceMT_2D.o:SourceCode/Source/SourceMT_2D.f90  
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Source/SourceMT_2D.f90 -o $(OBJDIR)/SourceMT_2D.o

$(OBJDIR)/machine_dep_mod.o:SourceCode/CSEM/EM1D/src/machine_dep_mod.f90  
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CSEM/EM1D/src/machine_dep_mod.f90 -o $(OBJDIR)/machine_dep_mod.o

$(OBJDIR)/util_mod.o:SourceCode/CSEM/EM1D/src/util_mod.f90 $(OBJDIR)/machine_dep_mod.o SourceCode/CSEM/EM1D/src/errors.f90 SourceCode/CSEM/EM1D/src/get_time.f90 SourceCode/CSEM/EM1D/src/tictoc.f90
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CSEM/EM1D/src/util_mod.f90 -o $(OBJDIR)/util_mod.o

$(OBJDIR)/constants_mod.o:SourceCode/CSEM/EM1D/src/constants_mod.f90 $(OBJDIR)/machine_dep_mod.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CSEM/EM1D/src/constants_mod.f90 -o $(OBJDIR)/constants_mod.o

$(OBJDIR)/spline_mod.o:SourceCode/CSEM/EM1D/src/spline_mod.f90 $(OBJDIR)/machine_dep_mod.o $(OBJDIR)/util_mod.o SourceCode/CSEM/EM1D/src/splines.f90
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CSEM/EM1D/src/spline_mod.f90 -o $(OBJDIR)/spline_mod.o

$(OBJDIR)/io_common_mod.o:SourceCode/CSEM/EM1D/src/io_common_mod.f90 $(OBJDIR)/machine_dep_mod.o $(OBJDIR)/util_mod.o $(OBJDIR)/constants_mod.o $(OBJDIR)/spline_mod.o SourceCode/CSEM/EM1D/src/AvailableUnit.f90 SourceCode/CSEM/EM1D/src/readsorec.f90 SourceCode/CSEM/EM1D/src/readsorcur.f90 SourceCode/CSEM/EM1D/src/readwavelet.f90 SourceCode/CSEM/EM1D/src/fileoperations.f90
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CSEM/EM1D/src/io_common_mod.f90 -o $(OBJDIR)/io_common_mod.o

$(OBJDIR)/hankel_mod.o:SourceCode/CSEM/EM1D/src/hankel_mod.f90 $(OBJDIR)/machine_dep_mod.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CSEM/EM1D/src/hankel_mod.f90 -o $(OBJDIR)/hankel_mod.o

$(OBJDIR)/adaptive_int_mod.o:SourceCode/CSEM/EM1D/src/adaptive_int_mod.f90 $(OBJDIR)/machine_dep_mod.o $(OBJDIR)/constants_mod.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CSEM/EM1D/src/adaptive_int_mod.f90 -o $(OBJDIR)/adaptive_int_mod.o

$(OBJDIR)/counter_mod.o:SourceCode/CSEM/EM1D/src/counter_mod.f90 $(OBJDIR)/machine_dep_mod.o $(OBJDIR)/util_mod.o SourceCode/CSEM/EM1D/src/counter.f90
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CSEM/EM1D/src/counter_mod.f90 -o $(OBJDIR)/counter_mod.o

$(OBJDIR)/refl_mod_new.o:SourceCode/CSEM/EM1D/src/refl_mod_new.f90 $(OBJDIR)/machine_dep_mod.o $(OBJDIR)/util_mod.o $(OBJDIR)/io_common_mod.o $(OBJDIR)/hankel_mod.o $(OBJDIR)/adaptive_int_mod.o $(OBJDIR)/counter_mod.o SourceCode/CSEM/EM1D/src/quadpack_dbl.f90 SourceCode/CSEM/EM1D/src/find_radii.f90 SourceCode/CSEM/EM1D/src/get_dz.f90
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CSEM/EM1D/src/refl_mod_new.f90 -o $(OBJDIR)/refl_mod_new.o

$(OBJDIR)/EM1D.o:SourceCode/CSEM/EM1D/EM1D.f90 $(OBJDIR)/refl_mod_new.o $(OBJDIR)/io_common_mod.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CSEM/EM1D/EM1D.f90 -o $(OBJDIR)/EM1D.o

$(OBJDIR)/SourceCSEM_EM1D.o:SourceCode/Source/SourceCSEM_EM1D.f90 $(OBJDIR)/SourceCSEM.o $(OBJDIR)/EM1D.o $(OBJDIR)/TransmitterCSEM.o $(OBJDIR)/TransmitterArray.o $(OBJDIR)/ModelParameterCell.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Source/SourceCSEM_EM1D.f90 -o $(OBJDIR)/SourceCSEM_EM1D.o

$(OBJDIR)/SourceCSEM_Dipole1D.o:SourceCode/Source/SourceCSEM_Dipole1D.f90 $(OBJDIR)/SourceCSEM.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Source/SourceCSEM_Dipole1D.f90 -o $(OBJDIR)/SourceCSEM_Dipole1D.o

$(OBJDIR)/ReceiverFullImpedance.o:SourceCode/Receivers/ReceiverFullImpedance.f90 $(OBJDIR)/Receiver.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Receivers/ReceiverFullImpedance.f90 -o $(OBJDIR)/ReceiverFullImpedance.o

$(OBJDIR)/ReceiverFullVerticalMagnetic.o:SourceCode/Receivers/ReceiverFullVerticalMagnetic.f90 $(OBJDIR)/Receiver.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Receivers/ReceiverFullVerticalMagnetic.f90 -o $(OBJDIR)/ReceiverFullVerticalMagnetic.o

$(OBJDIR)/ReceiverOffDiagonalImpedance.o:SourceCode/Receivers/ReceiverOffDiagonalImpedance.f90 $(OBJDIR)/Receiver.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Receivers/ReceiverOffDiagonalImpedance.f90 -o $(OBJDIR)/ReceiverOffDiagonalImpedance.o

$(OBJDIR)/ReceiverSingleField.o:SourceCode/Receivers/ReceiverSingleField.f90 $(OBJDIR)/Receiver.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Receivers/ReceiverSingleField.f90 -o $(OBJDIR)/ReceiverSingleField.o

$(OBJDIR)/ModelReader.o:SourceCode/ModelParameter/ModelReader.f90 $(OBJDIR)/Grid.o $(OBJDIR)/ModelParameter.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelParameter/ModelReader.f90 -o $(OBJDIR)/ModelReader.o

$(OBJDIR)/ModelReader_Weerachai.o:SourceCode/ModelParameter/ModelReader_Weerachai.f90 $(OBJDIR)/ModelReader.o $(OBJDIR)/Utilities.o $(OBJDIR)/rScalar3D_SG.o $(OBJDIR)/ModelParameterCell_SG.o $(OBJDIR)/ModelParameterCell_MR.o $(OBJDIR)/ForwardControlFile.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModelParameter/ModelReader_Weerachai.f90 -o $(OBJDIR)/ModelReader_Weerachai.o

$(OBJDIR)/DataEntry.o:SourceCode/DataIO/DataEntry.f90 $(OBJDIR)/Constants.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/DataIO/DataEntry.f90 -o $(OBJDIR)/DataEntry.o

$(OBJDIR)/DataEntryArray.o:SourceCode/DataIO/DataEntryArray.f90 $(OBJDIR)/DataEntry.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/DataIO/DataEntryArray.f90 -o $(OBJDIR)/DataEntryArray.o

$(OBJDIR)/DataEntryMT.o:SourceCode/DataIO/DataEntryMT.f90 $(OBJDIR)/DataEntry.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/DataIO/DataEntryMT.f90 -o $(OBJDIR)/DataEntryMT.o

$(OBJDIR)/DataEntryMT_REF.o:SourceCode/DataIO/DataEntryMT_REF.f90 $(OBJDIR)/DataEntryMT.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/DataIO/DataEntryMT_REF.f90 -o $(OBJDIR)/DataEntryMT_REF.o

$(OBJDIR)/DataEntryCSEM.o:SourceCode/DataIO/DataEntryCSEM.f90 $(OBJDIR)/DataEntry.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/DataIO/DataEntryCSEM.f90 -o $(OBJDIR)/DataEntryCSEM.o

$(OBJDIR)/ReceiverExyAmpliPhase.o:SourceCode/Receivers/ReceiverExyAmpliPhase.f90 $(OBJDIR)/Receiver.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Receivers/ReceiverExyAmpliPhase.f90 -o $(OBJDIR)/ReceiverExyAmpliPhase.o

$(OBJDIR)/DataFile.o:SourceCode/DataIO/DataFile.f90 $(OBJDIR)/Constants.o $(OBJDIR)/String.o $(OBJDIR)/DataEntryArray.o $(OBJDIR)/DataEntryMT.o $(OBJDIR)/DataEntryMT_REF.o $(OBJDIR)/DataEntryCSEM.o $(OBJDIR)/ReceiverFullImpedance.o $(OBJDIR)/ReceiverFullVerticalMagnetic.o $(OBJDIR)/ReceiverOffDiagonalImpedance.o $(OBJDIR)/ReceiverSingleField.o $(OBJDIR)/ReceiverExyAmpliPhase.o $(OBJDIR)/ReceiverArray.o $(OBJDIR)/TransmitterMT.o $(OBJDIR)/TransmitterCSEM.o $(OBJDIR)/TransmitterArray.o $(OBJDIR)/DataGroupTxArray.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/DataIO/DataFile.f90 -o $(OBJDIR)/DataFile.o

$(OBJDIR)/DataFileStandard.o:SourceCode/DataIO/DataFileStandard.f90 $(OBJDIR)/DataFile.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/DataIO/DataFileStandard.f90 -o $(OBJDIR)/DataFileStandard.o

$(OBJDIR)/CoreComponents.o:SourceCode/CoreComponents.f90 $(OBJDIR)/ForwardControlFile.o $(OBJDIR)/InversionControlFile.o $(OBJDIR)/ModelOperator_MF_SG.o $(OBJDIR)/ModelOperator_SP_V1.o $(OBJDIR)/ModelOperator_SP_V2.o $(OBJDIR)/ModelParameterCell_SG.o $(OBJDIR)/ModelParameterCell_MR.o $(OBJDIR)/ModelCovariance.o $(OBJDIR)/ForwardSolver_IT_DC.o $(OBJDIR)/SourceMT_1D.o $(OBJDIR)/SourceMT_2D.o $(OBJDIR)/SourceCSEM_EM1D.o $(OBJDIR)/SourceCSEM_Dipole1D.o $(OBJDIR)/SourceAdjoint.o $(OBJDIR)/ReceiverFullImpedance.o $(OBJDIR)/ReceiverFullVerticalMagnetic.o $(OBJDIR)/ReceiverOffDiagonalImpedance.o $(OBJDIR)/ReceiverSingleField.o $(OBJDIR)/DataGroupTxArray.o $(OBJDIR)/ModelReader_Weerachai.o $(OBJDIR)/DataFileStandard.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/CoreComponents.f90 -o $(OBJDIR)/CoreComponents.o

$(OBJDIR)/ForwardModeling.o:SourceCode/ForwardModeling.f90 $(OBJDIR)/CoreComponents.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ForwardModeling.f90 -o $(OBJDIR)/ForwardModeling.o

$(OBJDIR)/Sensitivity.o:SourceCode/Sensitivity.f90 $(OBJDIR)/ForwardModeling.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Sensitivity.f90 -o $(OBJDIR)/Sensitivity.o

$(OBJDIR)/Inversion.o:SourceCode/Inversion/Inversion.f90 $(OBJDIR)/ModelParameter.o $(OBJDIR)/DataGroupTxArray.o $(OBJDIR)/Sensitivity.o $(OBJDIR)/TransmitterMT.o $(OBJDIR)/TransmitterCSEM.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Inversion/Inversion.f90 -o $(OBJDIR)/Inversion.o

$(OBJDIR)/InversionDCG.o:SourceCode/Inversion/InversionDCG.f90 $(OBJDIR)/Inversion.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Inversion/InversionDCG.f90 -o $(OBJDIR)/InversionDCG.o

$(OBJDIR)/InversionNLCG.o:SourceCode/Inversion/InversionNLCG.f90 $(OBJDIR)/Inversion.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Inversion/InversionNLCG.f90 -o $(OBJDIR)/InversionNLCG.o

$(OBJDIR)/InversionJob.o:SourceCode/Inversion/InversionJob.f90 $(OBJDIR)/InversionDCG.o $(OBJDIR)/InversionNLCG.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/Inversion/InversionJob.f90 -o $(OBJDIR)/InversionJob.o

$(OBJDIR)/ModEM.o:SourceCode/ModEM.f90 $(OBJDIR)/InversionJob.o 
	 $(F90) -c $(MODULE) $(FFLAGS) $(MPIFLAGS) SourceCode/ModEM.f90 -o $(OBJDIR)/ModEM.o

# Type " make clean " to get rid of all object and module files 
clean: 
	cd $(OBJDIR); \
	rm -f *~ *.o *.obj *.mod *.d *.s00 *.dbg *.stackdump \
	`find . -mindepth 1 -name "*~"` 

cleanall: clean 
	rm -f $(OUTDIR)/ModEM 

src: clean 
	tar cvfz $(ARCHIVE).tgz * 

  
